/**
 * SCSS Mixins for Magical Blocks
 *
 * Reusable mixins for responsive design, typography, and common patterns.
 *
 * @package Magical_Blocks
 * @since   1.0.0
 */

// Breakpoints
$breakpoints: (
	'sm': 576px,
	'md': 768px,
	'lg': 1024px,
	'xl': 1280px
);

// Media query mixins
@mixin breakpoint-up($size) {
	@media (min-width: map-get($breakpoints, $size)) {
		@content;
	}
}

@mixin breakpoint-down($size) {
	$max-width: map-get($breakpoints, $size) - 1px;
	@media (max-width: $max-width) {
		@content;
	}
}

@mixin tablet {
	@media (max-width: 1024px) {
		@content;
	}
}

@mixin mobile {
	@media (max-width: 767px) {
		@content;
	}
}

@mixin desktop-only {
	@media (min-width: 1025px) {
		@content;
	}
}

// Typography mixins
@mixin heading($level: 2) {
	font-family: var(--mgb-font-family-heading);
	font-weight: var(--mgb-font-weight-bold);
	line-height: var(--mgb-line-height-tight);
	margin: 0;

	@if $level == 1 {
		font-size: var(--mgb-font-size-4xl);
	} @else if $level == 2 {
		font-size: var(--mgb-font-size-3xl);
	} @else if $level == 3 {
		font-size: var(--mgb-font-size-2xl);
	} @else if $level == 4 {
		font-size: var(--mgb-font-size-xl);
	} @else if $level == 5 {
		font-size: var(--mgb-font-size-lg);
	} @else {
		font-size: var(--mgb-font-size-md);
	}
}

@mixin body-text($size: 'base') {
	font-family: var(--mgb-font-family);
	font-weight: var(--mgb-font-weight-normal);
	line-height: var(--mgb-line-height-base);

	@if $size == 'sm' {
		font-size: var(--mgb-font-size-sm);
	} @else if $size == 'lg' {
		font-size: var(--mgb-font-size-lg);
	} @else {
		font-size: var(--mgb-font-size-base);
	}
}

// Flexbox mixins
@mixin flex-center {
	display: flex;
	align-items: center;
	justify-content: center;
}

@mixin flex-between {
	display: flex;
	align-items: center;
	justify-content: space-between;
}

@mixin flex-column {
	display: flex;
	flex-direction: column;
}

// Shadow mixins
@mixin shadow($level: 'md') {
	@if $level == 'sm' {
		box-shadow: var(--mgb-shadow-sm);
	} @else if $level == 'lg' {
		box-shadow: var(--mgb-shadow-lg);
	} @else if $level == 'xl' {
		box-shadow: var(--mgb-shadow-xl);
	} @else {
		box-shadow: var(--mgb-shadow-md);
	}
}

// Transition mixins
@mixin transition($property: all, $speed: 'base') {
	@if $speed == 'fast' {
		transition: $property var(--mgb-transition-fast);
	} @else if $speed == 'slow' {
		transition: $property var(--mgb-transition-slow);
	} @else {
		transition: $property var(--mgb-transition-base);
	}
}

// Button base mixin
@mixin button-base {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: var(--mgb-spacing-sm);
	padding: var(--mgb-spacing-sm) var(--mgb-spacing-md);
	border: none;
	border-radius: var(--mgb-radius-md);
	font-family: var(--mgb-font-family);
	font-size: var(--mgb-font-size-base);
	font-weight: var(--mgb-font-weight-medium);
	line-height: 1;
	text-decoration: none;
	cursor: pointer;
	@include transition(all, 'fast');

	&:focus {
		outline: 2px solid var(--mgb-primary);
		outline-offset: 2px;
	}

	&:disabled {
		opacity: 0.6;
		cursor: not-allowed;
	}
}

// Card mixin
@mixin card {
	background: var(--mgb-background);
	border: 1px solid var(--mgb-border);
	border-radius: var(--mgb-radius-lg);
	padding: var(--mgb-spacing-lg);
	@include shadow('md');
}

// Truncate text
@mixin truncate($lines: 1) {
	@if $lines == 1 {
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	} @else {
		display: -webkit-box;
		-webkit-line-clamp: $lines;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
}

// Hide visually but keep accessible
@mixin visually-hidden {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

// Reset list styles
@mixin list-reset {
	list-style: none;
	margin: 0;
	padding: 0;
}

// Aspect ratio (for older browser support)
@mixin aspect-ratio($width, $height) {
	aspect-ratio: #{$width} / #{$height};

	@supports not (aspect-ratio: 1 / 1) {
		&::before {
			content: '';
			display: block;
			padding-top: calc(#{$height} / #{$width} * 100%);
		}
	}
}

// Hover effect
@mixin hover-lift {
	@include transition(transform);

	&:hover {
		transform: translateY(-2px);
	}
}

// Focus visible (keyboard focus only)
@mixin focus-visible {
	&:focus-visible {
		outline: 2px solid var(--mgb-primary);
		outline-offset: 2px;
	}

	&:focus:not(:focus-visible) {
		outline: none;
	}
}

// Icon size
@mixin icon-size($size: 24px) {
	width: $size;
	height: $size;
	min-width: $size;

	svg {
		width: 100%;
		height: 100%;
	}
}
